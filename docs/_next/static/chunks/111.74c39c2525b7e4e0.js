"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{5492:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var n=s(5155),l=s(2115),a=s(2177);let r=(0,l.createContext)(),i=()=>{try{let e=localStorage.getItem("sitespec_pages_data");if(e)return JSON.parse(e)}catch(e){console.error("從 localStorage 加載數據失敗:",e)}return{}},o=e=>{try{localStorage.setItem("sitespec_pages_data",JSON.stringify(e))}catch(e){console.error("保存數據到 localStorage 失敗:",e)}};function c(e){let{children:t}=e,[s,a]=(0,l.useState)({});(0,l.useEffect)(()=>{let e=i();Object.keys(e).length>0&&(a(e),console.log("已從 localStorage 加載數據"))},[]);let c=e=>{if("main-1"===e)return"/";if(e.startsWith("main-")&&"main-1"!==e){let t=s[e];return t&&t.englishName?"/".concat(t.englishName):"/"}let t=e.split("-"),n="",l=[];for(let e=0;e<t.length;e++){if(0===e){if("main-1"==(n="main-"+t[e]))continue}else n=n+"-"+t[e];let a=s[n];a&&a.englishName&&l.push(a.englishName)}return(l.length>0?"/"+l.join("/"):"")||"/"};return(0,n.jsx)(r.Provider,{value:{pagesData:s,updatePageData:(e,t)=>{if(!e)return void console.error("更新頁面數據失敗: pageId 不能為空");a(s=>{let n={...s};return n[e]={...t},o(n),n})},getAllPagesData:()=>s,clearPageData:e=>{a(t=>{let s={...t};return delete s[e],o(s),s})},clearAllData:()=>new Promise(e=>{a({}),localStorage.removeItem("sitespec_pages_data"),console.log("已清除所有頁面數據"),setTimeout(()=>{e()},50)}),exportData:()=>JSON.stringify(s,null,2),getPathFromPageId:c,getPageHierarchy:()=>{let e={};return Object.keys(s).forEach(t=>{let n=c(t),l=s[t];(!("/"===n&&t.startsWith("main-"))||"main-1"===t||l.englishName)&&("main-1"===t?e[n]={...l,title:"首頁",textContent:l.textContent||l.pageDescription||"",styleDescription:l.styleDescription||"",id:t}:e[n]={...l,title:l.chineseName||"",textContent:l.textContent||l.pageDescription||"",styleDescription:l.styleDescription||"",id:t})}),e}},children:t})}function d(){let e=(0,l.useContext)(r);if(void 0===e)throw Error("useFormData must be used within a FormProvider");return e}let m=e=>{let{pageId:t,onSubmit:s,onCancel:r}=e,{pagesData:i,updatePageData:o}=d(),c=i[t]||{},{register:m,handleSubmit:x,formState:{errors:h},reset:g,control:u}=(0,a.mN)({defaultValues:c,mode:"onChange"}),[p,f]=(0,l.useState)(c.files||[]),j=(0,a.FH)({control:u,name:"chineseName"}),b=(0,a.FH)({control:u,name:"englishName"}),y=(0,a.FH)({control:u,name:"textContent"}),N=(0,a.FH)({control:u,name:"styleDescription"}),v=(0,l.useRef)({chineseName:j||"",englishName:b||"",textContent:y||"",styleDescription:N||""});(0,l.useEffect)(()=>{"main-1"===t&&("首頁"!==j||""!==b)&&o(t,{...c,chineseName:"首頁",englishName:"",textContent:c.textContent||"",styleDescription:c.styleDescription||"",files:c.files||[]})},[t]),(0,l.useEffect)(()=>{let e="main-1"===t,n=e?"首頁":j||"",l=e?"":b||"",a=v.current.chineseName!==n||v.current.englishName!==l||v.current.textContent!==(y||"")||v.current.styleDescription!==(N||"");if(t&&a){v.current={chineseName:n,englishName:l,textContent:y||"",styleDescription:N||""};let e={...v.current,files:p},a=setTimeout(()=>{o(t,e),s&&s(e)},300);return()=>clearTimeout(a)}},[t,j,b,y,N,p]),(0,l.useEffect)(()=>{let e=i[t];e?(e.pageDescription&&!e.textContent&&(e.textContent=e.pageDescription),g(e),f(e.files||[])):(g({}),f([]))},[t,i,g]);let[w,k]=(0,l.useState)(!1),C="main-1"===t;return(0,n.jsxs)("form",{onSubmit:x(e=>{}),className:"bg-white p-6 rounded border border-gray-200 mb-4",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["中文名稱",C?(0,n.jsx)("input",{type:"text",value:"首頁",readOnly:!0,className:"border rounded w-full py-2 px-3 mt-1 text-gray-700 bg-gray-100 leading-tight font-mono"}):(0,n.jsx)("input",{...m("chineseName",{required:"中文名稱是必填的"}),className:"border rounded w-full py-2 px-3 mt-1 text-gray-700 leading-tight focus:outline-none focus:ring-1 focus:ring-gray-400"})]}),!C&&h.chineseName&&(0,n.jsx)("p",{className:"text-red-500 text-xs",children:h.chineseName.message})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["英文名稱",C?(0,n.jsx)("input",{type:"text",value:"",readOnly:!0,placeholder:"根路徑",className:"border rounded w-full py-2 px-3 mt-1 text-gray-700 bg-gray-100 leading-tight font-mono"}):(0,n.jsx)("input",{...m("englishName",{required:"英文名稱是必填的",pattern:{value:/^[a-zA-Z0-9-_]+$/,message:"只能包含英文、數字、連字符或底線"}}),className:"border rounded w-full py-2 px-3 mt-1 text-gray-700 leading-tight focus:outline-none focus:ring-1 focus:ring-gray-400",placeholder:"example-page"})]}),!C&&h.englishName&&(0,n.jsx)("p",{className:"text-red-500 text-xs",children:h.englishName.message})]}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["文字內容",(0,n.jsx)("textarea",{...m("textContent"),className:"border rounded w-full py-2 px-3 mt-1 text-gray-700 leading-tight focus:outline-none focus:ring-1 focus:ring-gray-400",rows:"3",placeholder:"頁面需要顯示的文字內容"})]})}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["排版與樣式描述",(0,n.jsx)("textarea",{...m("styleDescription"),className:"border rounded w-full py-2 px-3 mt-1 text-gray-700 leading-tight focus:outline-none focus:ring-1 focus:ring-gray-400",rows:"3",placeholder:"頁面的排版、字體、顏色等樣式要求"})]})}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:["圖片素材",(0,n.jsx)("div",{className:"mt-1 flex items-center justify-center border-2 border-dashed rounded-md p-4 ".concat(w?"border-gray-500 bg-gray-50":"border-gray-300"),onDragOver:e=>{e.preventDefault(),k(!0)},onDragLeave:()=>{k(!1)},onDrop:e=>{if(e.preventDefault(),k(!1),e.dataTransfer.files){let s=Array.from(e.dataTransfer.files);f(e=>{let n=[...e,...s];return o(t,{chineseName:j||"",englishName:b||"",textContent:y||"",styleDescription:N||"",files:n}),n})}},children:(0,n.jsxs)("div",{className:"space-y-1 text-center",children:[(0,n.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,n.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,n.jsxs)("label",{htmlFor:"file-upload-".concat(t),className:"relative cursor-pointer bg-white rounded-md font-medium text-gray-600 hover:text-gray-500 focus-within:outline-none",children:[(0,n.jsx)("span",{children:"選擇檔案"}),(0,n.jsx)("input",{id:"file-upload-".concat(t),name:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{if(e.target.files){let s=Array.from(e.target.files);f(e=>{let n=[...e,...s];return o(t,{chineseName:j||"",englishName:b||"",textContent:y||"",styleDescription:N||"",files:n}),n})}},className:"sr-only"})]}),(0,n.jsx)("p",{className:"pl-1",children:"或拖曳至此處"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"可上傳頁面所需的圖片素材 (PNG, JPG, SVG 等格式)"})]})})]}),p.length>0&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"已選擇的圖片："}),(0,n.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 mt-2",children:p.map((e,s)=>(0,n.jsxs)("li",{className:"flex items-center",children:[(0,n.jsxs)("span",{children:[e.name," (",Math.round(e.size/1024)," KB)"]}),(0,n.jsx)("button",{type:"button",onClick:()=>{let e=[...p];e.splice(s,1),f(e),o(t,{chineseName:j||"",englishName:b||"",textContent:y||"",styleDescription:N||"",files:e})},className:"ml-2 text-red-500 hover:text-red-700",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},s))})]})]})]})},x=e=>{let{pageId:t,baseTitle:s="網站架設需求規格系統 | FracDigi"}=e,{pagesData:n}=d(),a=(0,l.useRef)(s);return(0,l.useEffect)(()=>{let e=s;if(t&&n[t]){let{chineseName:l}=n[t];l&&(e="".concat(l," | ").concat(s))}return a.current!==e&&(document.title=e,a.current=e),()=>{document.title!==s&&(document.title=s)}},[n,t,s]),null},h=e=>{let t,{id:s,level:a=0,title:r,onRemove:i,parentId:o=null,parentPath:c="",expandedPageMap:g={},onToggleExpand:u,onExpandChild:p}=e,{pagesData:f,clearPageData:j}=d(),[b,y]=(0,l.useState)([]),[N,v]=(0,l.useState)(1),[w,k]=(0,l.useState)(c);(0,l.useEffect)(()=>{if(0===Object.keys(f).length)return;let e="".concat(s,"-"),t=Object.keys(f).filter(t=>{if(!t.startsWith(e))return!1;let n=s.split("-").length;return t.split("-").length===n+1});if(t.length>0){console.log("[".concat(s,"] 找到 ").concat(t.length," 個子頁面"));let e=Math.max(...t.map(e=>{let t=e.split("-");return parseInt(t[t.length-1],10)||0}));e>=N&&v(e+1);let n=t.map(e=>{let t=f[e]||{};return{id:e,level:a+1,title:t.chineseName||"新頁面"}});b.map(e=>e.id).sort().join(",")!==n.map(e=>e.id).sort().join(",")&&(console.log("[".concat(s,"] 更新子頁面列表")),y(n))}else b.length>0&&(console.log("[".concat(s,"] 清空子頁面列表")),y([]))},[s,a,f]);let C=g[s]||!1,D=e=>{y(b.filter(t=>t.id!==e)),j(e),Object.keys(f).filter(t=>t.startsWith("".concat(e,"-"))).forEach(e=>j(e))};(0,l.useEffect)(()=>{if("main-1"===s)return void k("/");let e=f[s];e&&e.englishName?c?k("".concat(c,"/").concat(e.englishName)):k("/".concat(e.englishName)):k(c)},[f,s,c]);let S=f[s]||{},L="main-1"===s,E=L?"首頁":S.chineseName||"",O=L?"":S.englishName||"";return t=E||(a>0?"未命名頁面":r),a>0&&O&&(t="".concat(t," - ").concat(L?"/":w||(O?"/".concat(O):"/"))),(0,n.jsxs)("div",{className:"relative ".concat(a>0?"ml-8 pl-4 border-l border-gray-300":""),children:[C&&(0,n.jsx)(x,{pageId:s}),(0,n.jsxs)("div",{className:"mb-2 flex justify-between items-center",children:[(0,n.jsxs)("button",{onClick:()=>{u&&u(s,o)},className:"flex items-center gap-2 text-left w-full","aria-expanded":C,children:[(0,n.jsx)("span",{className:"flex-shrink-0 w-5 h-5 text-gray-500",children:C?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 font-mono",children:t})]}),a>0&&(0,n.jsx)("button",{onClick:()=>i(s),className:"text-gray-500 hover:text-gray-700","aria-label":"Remove page",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),C&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m,{pageId:s,onSubmit:e=>{console.log("頁面 ".concat(s," 提交的數據:"),e)}}),(0,n.jsx)("div",{className:"pl-4",children:b.map(e=>(0,n.jsx)(h,{id:e.id,level:e.level,title:e.title,parentId:s,parentPath:w,onRemove:D,expandedPageMap:g,onToggleExpand:u,onExpandChild:p},e.id))}),(0,n.jsxs)("button",{type:"button",onClick:()=>{let e="".concat(s,"-").concat(N);y([...b,{id:e,level:a+1,title:"新頁面"}]),v(N+1),u&&u(e,s)},className:"mb-6 flex items-center gap-1 text-gray-600 hover:text-gray-800",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"新增頁面"]})]})]})};var g=s(9311),u=s.n(g);let p=()=>{let{pagesData:e,exportData:t,getPageHierarchy:s}=d(),[a,r]=(0,l.useState)(!1),i=()=>{r(!1)},o=async()=>{let e=new(u());Object.entries(s()).forEach(t=>{let[s,n]=t,l="/"===s?"":s,a="# ".concat(n.title||"無標題","\n\n## 文字內容\n").concat(n.textContent||"無文字內容","\n\n## 排版與樣式描述\n").concat(n.styleDescription||"無樣式描述","\n\n## 相關圖片\n").concat(n.files&&n.files.length>0?n.files.map(e=>"- ".concat(e.name)).join("\n"):"無圖片素材");""===l?e.file("readme.md",a):e.file("".concat(l,"/readme.md"),a),n.files&&n.files.length>0&&n.files.forEach(t=>{if(t instanceof File){let s=l?"".concat(l,"/").concat(t.name):t.name;e.file(s,t)}else if("object"==typeof t&&t.name){let s=t.content||"",n=l?"".concat(l,"/").concat(t.name):t.name;e.file(n,s)}})});try{let t=await e.generateAsync({type:"blob"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="網站需求_".concat(new Date().toISOString().split("T")[0],".zip"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s),i()}catch(e){console.error("ZIP 檔案生成失敗:",e),alert("匯出失敗，請再試一次")}},c=Object.keys(e).length>0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>{r(!0)},disabled:!c,className:"h-full px-4 py-2 flex items-center gap-2 rounded ".concat(c?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),"匯出需求"]}),a&&(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-lg w-full",children:[(0,n.jsx)("h3",{className:"text-xl font-bold mb-4",children:"匯出網站需求"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("p",{className:"mb-2",children:"選擇您想要的匯出格式："}),(0,n.jsxs)("div",{className:"bg-gray-100 p-3 rounded max-h-60 overflow-auto text-xs",children:[(0,n.jsx)("p",{className:"mb-2",children:"預覽需求文件結構："}),(0,n.jsx)("ul",{className:"space-y-1",children:Object.keys(s()).sort((e,t)=>"/"===e?-1:"/"===t?1:e.localeCompare(t)).map((e,t)=>{let l=s()[e];return(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-gray-500 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"font-medium",children:"/"===e?"/readme.md":"".concat(e,"/readme.md")}),(0,n.jsxs)("span",{className:"text-gray-600",children:[" - ",l.title||"無標題"]}),l.files&&l.files.length>0&&(0,n.jsxs)("span",{className:"text-gray-500",children:[" (含 ",l.files.length," 個檔案)"]})]})]},t)})})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,n.jsx)("button",{onClick:i,className:"px-4 py-2 border border-gray-300 rounded",children:"取消"}),(0,n.jsx)("button",{onClick:()=>{let e=new Blob([t()],{type:"application/json"}),s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download="網站規格_".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),i()},className:"px-4 py-2 border border-gray-300 rounded",children:"下載 JSON"}),(0,n.jsx)("button",{onClick:o,className:"px-4 py-2 bg-gray-800 text-white rounded",children:"下載 ZIP"})]})]})})]})};var f=s(5695);let j=()=>{let[e,t]=(0,l.useState)({}),[s,a]=(0,l.useState)(!1),[r,i]=(0,l.useState)(null),[o,c]=(0,l.useState)(!1),{updatePageData:m,clearAllData:x,pagesData:h}=d();(0,f.useRouter)(),(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/templates.json");if(!e.ok)throw Error("無法載入模板數據");let s=await e.json();t(s)}catch(e){console.error("載入模板失敗:",e)}})()},[]);let g=()=>{a(!1),i(null)},u=e=>{i(e)},p=async()=>{if(r&&e[r]){c(!0);try{await x();let t=e[r];for(let e of(console.log("開始套用「".concat(t.name,"」模板...")),console.log("模板包含 ".concat(t.pages.length," 個頁面")),[...t.pages].sort((e,t)=>e.id.split("-").length-t.id.split("-").length)))console.log("更新頁面數據: ".concat(e.id," (").concat(e.chineseName,")")),m(e.id,{chineseName:e.chineseName,englishName:e.englishName,textContent:e.textContent,styleDescription:e.styleDescription,files:[]}),await new Promise(e=>setTimeout(e,50));await new Promise(e=>setTimeout(e,500)),console.log("模板套用完成，正在刷新頁面..."),c(!1),g(),alert("已成功套用「".concat(t.name,"」模板！"))}catch(e){console.error("套用模板失敗:",e),c(!1),alert("套用模板失敗，請再試一次")}}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>{a(!0)},className:"h-full px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 flex items-center gap-2",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})}),"使用模板"]}),s&&(0,n.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-3xl w-full",children:[(0,n.jsx)("h3",{className:"text-xl font-bold mb-4",children:"選擇網站模板"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.keys(e).map(t=>(0,n.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all ".concat(r===t?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300"),onClick:()=>u(t),children:[(0,n.jsx)("h4",{className:"font-bold text-lg mb-2",children:e[t].name}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e[t].description}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["包含 ",e[t].pages.length," 個頁面"]})]},t))}),r&&(0,n.jsxs)("div",{className:"mb-6 border-t border-b border-gray-200 py-4",children:[(0,n.jsx)("h4",{className:"font-bold mb-2",children:"模板頁面結構："}),(0,n.jsx)("ul",{className:"text-sm space-y-1",children:e[r].pages.map(e=>(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)("span",{className:"mr-2",children:"•"}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"font-medium",children:e.chineseName}),(0,n.jsxs)("span",{className:"text-gray-500",children:[" (/",e.englishName,")"]})]})]},e.id))})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,n.jsx)("button",{onClick:g,className:"px-4 py-2 border border-gray-300 rounded",children:"取消"}),(0,n.jsx)("button",{onClick:p,disabled:!r||o,className:"px-4 py-2 ".concat(!r||o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"," rounded flex items-center gap-2"),children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"套用中..."]}):(0,n.jsx)(n.Fragment,{children:"套用模板"})})]})]})})]})},b=()=>{let{clearPageData:e,pagesData:t}=d(),[s]=(0,l.useState)({id:"main-1",level:0,title:"網站結構"}),[a,r]=(0,l.useState)({"main-1":!0});(0,l.useEffect)(()=>{let e={};e["main-1"]=!0,Object.keys(t).forEach(t=>{e[t]=!0}),r(e),console.log("頁面數據變更，已自動展開所有頁面")},[t]);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(s=>{let n={...s},l=t?"".concat(t,"-"):"main-";return Object.keys(n).forEach(t=>{t.startsWith(l)&&t!==e&&(n[t]=!1)}),n[e]=!s[e],n})};return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center text-gray-800 font-mono",children:"網站架設需求規格文件"}),(0,n.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,n.jsx)(h,{id:s.id,level:s.level,title:s.title,onRemove:()=>{},onExpandChild:e=>i(e),isExpanded:a[s.id]||!1,expandedPageMap:a,onToggleExpand:i},s.id),(0,n.jsx)("div",{className:"mt-6 flex flex-col items-center gap-4",children:(0,n.jsxs)("div",{className:"flex gap-4 items-stretch h-10",children:[(0,n.jsx)(j,{}),(0,n.jsx)(p,{})]})})]})]})},y=()=>(0,n.jsx)(c,{children:(0,n.jsx)(b,{})})}}]);